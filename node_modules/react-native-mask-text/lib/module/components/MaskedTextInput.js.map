{"version":3,"names":["React","useEffect","useState","forwardRef","TextInput","mask","unMask","MaskedTextInputComponent","ref","pattern","type","options","defaultValue","onChangeText","value","inputAccessoryView","autoCapitalize","textBold","textItalic","textDecoration","style","rest","styleSheet","fontWeight","fontStyle","textDecorationLine","getMaskedValue","getUnMaskedValue","defaultValueCustom","defaultValueCurrency","initialRawValue","initialMaskedValue","initialUnMaskedValue","maskedValue","setMaskedValue","unMaskedValue","setUnmaskedValue","rawValue","setRawValue","actualValue","onChange","newUnMaskedValue","newMaskedValue","length","undefined","MaskedTextInput"],"sources":["MaskedTextInput.tsx"],"sourcesContent":["import React, {\n  useEffect,\n  useState,\n  forwardRef,\n  ForwardRefRenderFunction,\n} from 'react'\nimport { TextInput, TextInputProps } from 'react-native'\nimport { mask, unMask } from '../utils/mask'\nimport type { FormatType, MaskOptions, StyleObj, TextDecorationOptions } from 'src/@types'\n\n\ntype TIProps = Omit<TextInputProps, 'onChangeText'>\nexport interface MaskedTextInputProps extends TIProps {\n  mask?: string\n  type?: FormatType\n  options?: MaskOptions\n  defaultValue?: string\n  onChangeText: (text: string, rawText: string) => void\n  inputAccessoryView?: JSX.Element\n  autoCapitalize?: 'characters' | 'words' | 'sentences' | 'none'\n  textBold?: boolean\n  textItalic?:boolean\n  textDecoration?:TextDecorationOptions\n  style?: StyleObj\n}\n\nexport const MaskedTextInputComponent: ForwardRefRenderFunction<\n  TextInput,\n  MaskedTextInputProps\n> = (\n  {\n    mask: pattern = '',\n    type = 'custom',\n    options = {} as MaskOptions,\n    defaultValue,\n    onChangeText,\n    value,\n    inputAccessoryView,\n    autoCapitalize = 'sentences',\n    textBold,\n    textItalic,\n    textDecoration,\n    style,\n    ...rest\n  },\n  ref\n): JSX.Element => {\n  const styleSheet = {\n    ...(typeof style === 'object' ? style : {}),\n    fontWeight:textBold && 'bold',\n    fontStyle: textItalic && 'italic',\n    textDecorationLine: textDecoration\n  }\n  const getMaskedValue = (value: string) =>\n    mask(value, pattern, type, options, autoCapitalize)\n  const getUnMaskedValue = (value: string) =>\n    unMask(value, type as 'custom' | 'currency')\n\n  const defaultValueCustom = defaultValue || ''\n  const defaultValueCurrency = defaultValue || '0'\n\n  const initialRawValue = value;\n\n  const initialMaskedValue = getMaskedValue(\n    type === 'currency' ? defaultValueCurrency : defaultValueCustom\n  )\n\n  const initialUnMaskedValue = getUnMaskedValue(\n    type === 'currency' ? defaultValueCurrency : defaultValueCustom\n  )\n\n  const [maskedValue, setMaskedValue] = useState(initialMaskedValue)\n  const [unMaskedValue, setUnmaskedValue] = useState(initialUnMaskedValue)\n  const [rawValue, setRawValue] = useState(initialRawValue);\n  const actualValue = pattern || type === \"currency\" ? maskedValue : rawValue;\n\n  function onChange(value: string) {\n    const newUnMaskedValue = unMask(value, type as 'custom' | 'currency')\n    const newMaskedValue = mask(newUnMaskedValue, pattern, type, options)\n\n    setMaskedValue(newMaskedValue)\n    setUnmaskedValue(newUnMaskedValue)\n    setRawValue(value);\n  }\n\n  useEffect(() => {\n    onChangeText(maskedValue, unMaskedValue)\n  }, [maskedValue, unMaskedValue])\n\n  useEffect(() => {\n    if (value) {\n      setMaskedValue(getMaskedValue(value))\n      setUnmaskedValue(getUnMaskedValue(value))\n    } else {\n      setMaskedValue(initialMaskedValue)\n      setUnmaskedValue(initialUnMaskedValue)\n    }\n  }, [value])\n\n  return (\n    <>\n      <TextInput\n        onChangeText={(value) => onChange(value)}\n        ref={ref}\n        maxLength={pattern.length || undefined}\n        {...rest}\n        value={actualValue}\n        style={{...styleSheet} as StyleObj}\n      />\n      {inputAccessoryView}\n    </>\n  )\n}\n\nexport const MaskedTextInput = forwardRef(MaskedTextInputComponent)\n"],"mappings":"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"}